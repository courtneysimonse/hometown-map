<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8 />
	<title>Map of Murray, KY</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" />  <!-- different link -->
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"> <!-- h1 and h2 font -->

	<style>
		body {
			margin: 0;
			padding: 0;
			background: #f5f5f5;
			font-family: "Noto Sans", sans-serif;
			color: #3d3d3d;
			font-size: 100%; /* added */
		}

		section {
			width: 80%;
			margin: 20px auto;
		}

		h1 {
			/* width: 960px;
			margin: 20px auto; not in lesson template */
			font-size: 2em; /* added */
			font-family: 'Montserrat', serif;
			letter-spacing: .04em;
			}

		h2 {
			font-size: 1.5em; /* added */
			font-family: 'Montserrat', serif;
			letter-spacing: .04em;
		}

		p {
			font-size: 1em;
			line-height: 1.5em;
		}

		a {
			color: #8c001a; /* changed link color to dark red */
			font-weight: bold;
			text-decoration: none;
		}

		a:hover {
			text-decoration: underline;
		}

		ul {
			padding-left: 20px;
		}

		li {
			margin: 10px 0
		}

		#map {
			width: 100%; /* added */
			height: 540px;
			margin: 10px auto;
			border: 2px solid #d3d3d3;
		}

		.two-column{
  		float:left;
  		width:49%;
  		margin-right:1%;
		}

		.below-columns {
  		display:inline-block;
  		width:100%;
		}
	</style>
</head>

<body>
	<section>
		<h1>Murray, Kentucky</h1>
	</section> <!-- added section marker for heading -->

	<section>
		<div id='map'></div>
	</section> <!-- added section marker for map -->

	<section>
		<h2>about this map</h2>
		<p>Murray is home to the world's best Dairy Queen (yes, you can really tell a difference) and <a href="http://murraystate.edu">Murray State University</a>. </p>
		<p>It was also named the Friendliest Small Town in America in 2013 by Best of the Road! Check out <a href="http://www.tourmurray.com/">things to do</a> in this great city! </p>
		<div class="below-columns">
			<button id='mexican_restaurants'>Show Me Mexican Restaurants!</button>
			<br>
			<button id="clickme_id">Photos of Murray</button>
			<div id="photos_id"></div>
		</div>
		<div class="below-columns">
			<ul>
				<li>See my projects on GitHub: <a href="https://github.com/courtneysimonse">Courtney Simonse</a></li>
			</ul>
		</div>
	</section>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <!-- different link -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js"></script> <!-- different link -->
	<script>

		// map options
		var options = {
			center: [36.6094, -88.3155], // lat/lon values
			zoom: 14
		}

		// create a Leaflet map in our division container with id of 'map'
		var map = L.map('map', options);

		// request some basemap tiles and add to the map
		// ---- New base map! ----
		var Esri_WorldTopoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
			attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
		}).addTo(map);

		// write a custom message for the Leaflet tooltip
		var message = 'Murray, KY: Friendliest Small Town in America';

		// add a marker to the center of the map and open the tooltip
		L.marker(map.getCenter(), {
			icon: createIcon("Marker")
		})
			.bindTooltip(message)
			.addTo(map)
			.openTooltip();

		// locations
		var myLocations = [{
					name: "Dairy Queen",
					properties: {
						coordinates: [36.610249,-88.316841],
						type: 'Restaurant',
						details: 'Stop by for a refreshing treat!<br><img src="dairy_queen.jpg" alt="Dairy Queen sign" width=180 height=240>',
						locationMSU: false
					}
				},
				{
					name: "CFSB Center",
					properties: {
						coordinates: [36.622574,-88.319443],
						type: "Basketball",
						details: 'aka RSEC - home of MSU Racer basketball',
						locationMSU: true
					}
				},
				{
					name: "The Arboretum at Murray State University",
					properties: {
						coordinates: [36.606239,-88.329956],
						type: "Park",
						details: 'Great for a walk!<br><img src="the_arboretum.jpg" alt="The Arboretum at Murray State" width=240 height=240>',
						locationMSU: true
					}
				},
				{
					name: "Cheri Theaters",
					properties: {
						coordinates: [36.617699,-88.313515],
						type: "Theater",
						details: 'Catch a movie!<br><img src="cheri_theater.jpg" alt="Cheri Theater" width=210 height=175>',
						locationMSU: false
					}
				},
				{
					name: "Gate 28",
					properties: {
						coordinates: [36.614860,-88.314710],
						type: "Clothing Store",
						details: 'Cute boutique',
						locationMSU: false
					}
				},
				{
					name: "St. Leo",
					properties: {
						coordinates: [36.615368,-88.315300],
						type: "Church",
						details: 'Catholic Church',
						locationMSU: false
					}
				},
				{
					name: "Walmart",
					properties: {
						coordinates: [36.626980,-88.317581],
						type: "Grocery Store",
						details: 'Sometimes you just have to make the trip',
						locationMSU: false
					}
				},
				{
					name: "Kroger",
					properties: {
						coordinates: [36.625004,-88.312813],
						type: "Grocery Store",
						details: "has bulk bins",
						locationMSU: false
					}
				},
				{
					name: "Food Giant",
					properties: {
						coordinates: [36.597057,-88.315796],
						type: "Grocery Store",
						details: "aka Story's - The best fried chicken in town",
						locationMSU: false
					}
				},
				{
					name: "Pagliai's Pizza",
					properties: {
						coordinates: [36.617760, -88.311020],
						type: "Restaurant",
						details: "<a href='http://pagliaispizzaofmurray.com/menu.htm'>Italian restaurant</a> with a buffet and kid's play area",
						locationMSU: false
					}
				},
				{
					name: "H.R.H. Dumplin's",
					properties: {
						coordinates: [36.604908, -88.314804],
						type: "Restaurant",
						details: "Great lunch spot. Check out the <a href='https://locu.com/places/dumplins-murray-us/#menu'>menu</a>",
						locationMSU: false
					}
				},
				{
					name: "Calloway County High School",
					properties: {
						coordinates: [36.618820, -88.341710],
						type: "School",
						details: "Home of the Lakers",
						locationMSU: false
					}
				},
				{
					name: "Central Park",
					properties: {
						coordinates: [36.623680, -88.309790],
						type: "Park",
						details: "city pool, disc golf, playgrounds, one-room schoolhouse, Playhouse in the Park, and baseball fields",
						locationMSU: false
					}
				},
				{
					name: "Chestnut Park",
					properties: {
						coordinates: [36.616337, -88.310141],
						type: "Park",
						details: "playground, picnic area, baseball fields, basketball courts",
						locationMSU: false
					}
				},
				{
					name: "Murray High School",
					properties: {
						coordinates: [36.602016, -88.332184],
						type: "School",
						details: "Home of the Tigers",
						locationMSU: false
					}
				},
				{
					name: "Roy Stewart Stadium",
					properties: {
						coordinates: [36.621210, -88.317930],
						type: "Football",
						details: "Home of Racer Football",
						locationMSU: true
					}
				}
		]

		// place markers
		addMarkers(myLocations);


		// show photo with button click
		clickme_id.addEventListener('click', function() {
  		document.getElementById('photos_id').innerHTML =
				'<img src="Murray_from_641.jpg" alt="Murray from US 641 By Thelatchkeykid at English Wikipedia" style="width:100%">';
		});



		// array of objects for Mexican food button
		mexFood = [
			{
				name: "Los Portales",
				properties: {
					coordinates: [36.618679, -88.313560],
					type: "Restaurant",
					details: "Try the Pollo Loco or Speedy Gonzales",
				}
			},
			{
				name: "La Cocina",
				properties: {
					coordinates: [36.602291, -88.314934],
					type: "Restaurant",
					details: "Best chips and salsa",
				}
			},
			{
				name: "The Burrito Shack",
				properties: {
					coordinates: [36.612110, -88.321663],
					type: "Restaurant",
					details: "Good for a quick lunch",
				}
			}
		]

		// button for extra challenge
		var button = document.getElementById("mexican_restaurants");

		button.addEventListener("click", function() {
			addMarkers(mexFood);
		});

		// function for adding markers
		function addMarkers(locations) {
			// create popups
			// loop
			// Build the lcoation popup
			for (var i = 0; i < locations.length; i++) {

				// variable for properties
				var props = locations[i].properties;

				// build a string with HTML tags and content
				// add MSU info if applies
				if (props.locationMSU == true) {
					var locationPopup = "<p><b>" + locations[i].name + "</b></p>" +
	  				"<p><b>Details</b>: " + props.details  + "</p>" +
						"<p><i>Part of Murray State University</i></p>";
				}
				else {
					var locationPopup = "<p><b>" + locations[i].name + "</b></p>" +
	  				"<p><b>Details</b>: " + props.details  + "</p>";
				}

	    // Build Leaflet icon by calling a function to determine type of location
	      var iconLocation = createIcon(props.type); // Function call

				// create a Leaflet marker
				// add it to the map
				// and bind the popup content to the marker.
				L.marker(props.coordinates, {
	                icon: iconLocation // Insert returned function value
	            })
	            .addTo(map)
	            .bindPopup(locationPopup)
							.bindTooltip(locationPopup);

			}
		};

		// Function to determine type of location and return appropriate Leaflet icon object
		// Give URL for custom icons
		function createIcon(typeOfLocation) {
		  var iconURL = "", // declare the iconURL
		      iconSize = 20; // create default size

		            if (typeOfLocation == "Restaurant") {
		                iconURL = "svgs/restaurant-11.svg";
		            } else if (typeOfLocation == "Basketball") {
		                iconURL = "svgs/basketball-11.svg";
		            } else if (typeOfLocation == "Park") {
		            		iconURL = "svgs/park-11.svg";
		            } else if (typeOfLocation == "Theater") {
		            		iconURL = "svgs/cinema-11.svg";
		            } else if (typeOfLocation == "Clothing Store") {
		            		iconURL = "svgs/clothing-store-11.svg";
		            } else if (typeOfLocation == "Church") {
		            		iconURL = "svgs/religious-christian-11.svg";
		            } else if (typeOfLocation == "Grocery Store") {
		            		iconURL = "svgs/grocery-11.svg";
		            } else if (typeOfLocation == "School") {
		            		iconURL = "svgs/school-11.svg";
		            } else if (typeOfLocation == "Football") {
		            		iconURL = "svgs/america-football-11.svg";
		            } else  {
		            		iconURL = "svgs/marker-11.svg";
		            };

		            // Create a Leaflet icon object
		            var result = L.icon({
		                iconUrl: iconURL,
		                iconSize: iconSize,
		                popupAnchor: [0, -10] // Center of your icon is [0,0]
		            });
		            return result;
		            // Function returns a properly formatted Leaflet icon object to place on your map
		};

	</script>

</body>

</html>
