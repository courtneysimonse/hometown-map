<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8 />
	<title>Map of Murray, KY</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" />  <!-- different link -->
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"> <!-- h1 and h2 font -->

	<style>
		body {
			margin: 0;
			padding: 0;
			background: #f5f5f5;
			font-family: "Noto Sans", sans-serif;
			color: #3d3d3d;
			font-size: 100%; /* added */
		}

		section {
			width: 80%;
			margin: 20px auto;
		}

		h1 {
			/* width: 960px;
			margin: 20px auto; not in lesson template */
			font-size: 2em; /* added */
			font-family: 'Montserrat', serif;
			letter-spacing: .04em;
			}

		h2 {
			font-size: 1.5em; /* added */
			font-family: 'Montserrat', serif;
			letter-spacing: .04em;
		}

		p {
			font-size: 1em;
			line-height: 1.5em;
		}

		a {
			color: #8c001a; /* changed link color to dark red */
			font-weight: bold;
			text-decoration: none;
		}

		a:hover {
			text-decoration: underline;
		}

		ul {
			padding-left: 20px;
		}

		li {
			margin: 10px 0
		}

		#map {
			width: 100%; /* added */
			height: 540px;
			margin: 10px auto;
			border: 2px solid #d3d3d3;
		}

		.two-column{
  		float:left;
  		width:49%;
  		margin-right:1%;
		}

		.below-columns {
  		display:inline-block;
  		width:100%;
		}
	</style>
</head>

<body>
	<section>
		<h1>Murray, Kentucky</h1>
	</section> <!-- added section marker for heading -->

	<section>
		<div id='map'></div>
	</section> <!-- added section marker for map -->

	<section>
		<h2>about this map</h2>
		<p>Murray is home to the world's best Dairy Queen (yes, you can really tell a difference) and <a href="http://murraystate.edu">Murray State University</a>. </p>
		<p>It was also named the Friendliest Small Town in America in 2013 by Best of the Road! Check out <a href="http://www.tourmurray.com/">things to do</a> in this great city! </p>
		<div class="below-columns">
			<button id='mexican_restaurants'>Show Me Mexican Restaurants!</button>
			<br>
			<button id="clickme_id">Photos of Murray</button>
			<div id="photos_id"></div>
		</div>
		<div class="below-columns">
			<ul>
				<li>See my projects on GitHub: <a href="https://github.com/courtneysimonse">Courtney Simonse</a></li>
			</ul>
		</div>
	</section>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <!-- different link -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js"></script> <!-- different link -->
	<script>

		// map options
		var options = {
			center: [36.6094, -88.3155], // lat/lon values
			zoom: 14
		}

		// create a Leaflet map in our division container with id of 'map'
		var map = L.map('map', options);

		// request some basemap tiles and add to the map
		// ---- New base map! ----
		var Esri_WorldTopoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
			attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
		}).addTo(map);

		// write a custom message for the Leaflet tooltip
		var message = 'Murray, KY: Friendliest Small Town in America';

		// add a marker to the center of the map and open the tooltip
		L.marker(map.getCenter())
			.bindTooltip(message)
			.addTo(map)
			.openTooltip();

		// array for location names
		var nameLocation = ['Dairy Queen','CFSB Center','The Arboretum at Murray State University',
		'Cheri Theaters','Gate 28','St. Leo','Walmart','Kroger','Food Giant'];

		// array for Locations
		var coordinateLocation = [
			[36.610249,-88.316841],
			[36.622574,-88.319443],
			[36.606239,-88.329956],
			[36.617699,-88.313515],
			[36.614860,-88.314710],
			[36.615368,-88.315300],
			[36.626980,-88.317581],
			[36.625004,-88.312813],
			[36.597057,-88.315796]
		];

		// array for details about Locations
		var detailsLocation = ['Stop by for a refreshing treat!<br><img src="dairy_queen.jpg" alt="Dairy Queen sign" width=180 height=240>','aka RSEC - home of MSU Racer basketball',
		'Great for a walk!<br><img src="the_arboretum.jpg" alt="The Arboretum at Murray State" width=240 height=240>',
		'Catch a movie!<br><img src="cheri_theater.jpg" alt="Cheri Theater" width=210 height=175>',
		'Cute boutique','Catholic Church','Sometimes you just have to make the trip','Has bulk bins',"aka Story's - The best fried chicken in town"];

		// Is the location part of Murray State University?
		var locationMSU = [false,true,true,false,false,false,false,false,false];

		// Group your locations into categories for symbology
		var typeLocation = [
		                "Restaurant",
										"Basketball",
		                "Park",
										"Theater",
										"Clothing Store",
										"Church",
										"Grocery Store",
										"Grocery Store",
										"Grocery Store"
		            ];
		// Give URL for custom icon
		var typeIconURL = [
		                "svgs/restaurant-11.svg",
		                "svgs/basketball-11.svg",
		                "svgs/park-11.svg",
										"svgs/cinema-11.svg",
										"svgs/clothing-store-11.svg",
										"svgs/religious-christian-11.svg",
										"svgs/grocery-11.svg",
										"svgs/grocery-11.svg",
										"svgs/grocery-11.svg"
		            ];

		// loop
		// Iterate through array using indexes to access values

    // Build the lcoation popup
		for (var i = 0; i < nameLocation.length; i++) {
			// build a string with HTML tags and content
			// add MSU info if applies
			if (locationMSU[i] == true) {
				var locationPopup = "<b>" + nameLocation[i] + "</b><br>" +
  				"<b>Details</b>: " + detailsLocation[i]  + "<br><i>Part of Murray State University</i>";
			}
			else {
				var locationPopup = "<b>" + nameLocation[i] + "</b><br>" +
  				"<b>Details</b>: " + detailsLocation[i];
			}

    // Build Leaflet icon by calling a function to determine type of location
      var iconLocation = createIcon(typeLocation[i]); // Function call

			// create a Leaflet marker
			// add it to the map
			// and bind the popup content to the marker.
			L.marker(coordinateLocation[i], {
                icon: iconLocation // Insert returned function value
            })
            .addTo(map)
            .bindPopup(locationPopup)
						.bindTooltip(locationPopup);

		}

		// show photo with button click
		clickme_id.addEventListener('click', function() {
  		document.getElementById('photos_id').innerHTML =
				'<img src="Murray_from_641.jpg" alt="Murray from US 641 By Thelatchkeykid at English Wikipedia" style="width:100%">';
		});

		// Function to determine type of location and return appropriate Leaflet icon object

		function createIcon(typeOfLocation) {
		  var iconURL = "", // declare the iconURL
		      iconSize = 20; // create default size

		            if (typeOfLocation == "Restaurant") {
		                iconURL = typeIconURL[0];
		            } else if (typeOfLocation == "Basketball") {
		                iconURL = typeIconURL[1];
		            } else if (typeOfLocation == "Park") {
		            		iconURL = typeIconURL[2];
		            } else if (typeOfLocation == "Theater") {
		            		iconURL = typeIconURL[3];
		            } else if (typeOfLocation == "Clothing Store") {
		            		iconURL = typeIconURL[4];
		            } else if (typeOfLocation == "Church") {
		            		iconURL = typeIconURL[5];
		            } else if (typeOfLocation == "Grocery Store") {
		            		iconURL = typeIconURL[6];
		            };

		            // Create a Leaflet icon object
		            var result = L.icon({
		                iconUrl: iconURL,
		                iconSize: iconSize,
		                popupAnchor: [0, -10] // Center of your icon is [0,0]
		            });
		            return result;
		            // Function returns a properly formatted Leaf icon object to place on your map
		};
		// variables for names, locations, and details for each restaurant
		var mexFoodNames = ["Los Portales","La Cocina","The Burrito Shack"];
		var mexFoodCoords = [
			[36.618679, -88.313560],
			[36.602291, -88.314934],
			[36.612110, -88.321663]
		];
		var mexFoodDetails = ["Try the Pollo Loco or Speedy Gonzales",
			"Best chips and salsa", "Good for a quick lunch"];
		var mexFoodLocTypes = ["Restaurant","Restaurant","Restaurant"];

		// button for extra challenge
		var button = document.getElementById("mexican_restaurants");

		button.addEventListener("click", function() {
			addMarkers(mexFoodNames,mexFoodCoords,mexFoodDetails,mexFoodLocTypes);
		});

		// function for adding markers for Mexican restaurants
		function addMarkers(names,coords,details,types) {
			// create popups
			// loop
			for (var i = 0; i < names.length; i++) {

				// build a string with HTML tags and content
				var tooltip = "<b>" + names[i] + "</b><br>" +
						   				"<b>Details</b>: " + details[i];

				// create a Leaflet marker
				// add it to the map
				// and bind the popup content to the marker.
				L.marker(coords[i], {
	                icon: createIcon(types[i])
	            })
				.addTo(map)
					.bindTooltip(tooltip)
					.bindPopup(tooltip);
				}

		}

		// Another solid lab!

	</script>

</body>

</html>
